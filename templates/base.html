<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{% block title %}Simple Task System{% endblock %}</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
  <header>
    <div style="display: flex; align-items: center;">
      <img src="/static/logo.png" alt="–ú–£–ò–í –õ–æ–≥–æ—Ç–∏–ø">
      <h1>Simple Task System</h1>
    </div>
    {% if current_user.is_authenticated %}
      <div class="user-info">
        üëã –ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ, <strong>{{ current_user.username }}</strong>
      </div>
    {% endif %}
  </header>

  <nav>
    {% if current_user.is_authenticated %}
      <a href="{{ url_for('index') }}" class="{{ 'active' if request.path == '/' else '' }}">–ì–ª–∞–≤–Ω–∞—è</a>
      <a href="{{ url_for('help_page') }}" class="{{ 'active' if request.path.startswith('/help') else '' }}">–°–ø—Ä–∞–≤–∫–∞</a>
      {% if current_user.role == 'admin' %}
        <a href="{{ url_for('admin_panel') }}" class="{{ 'active' if request.path.startswith('/admin') else '' }}">–ê–¥–º–∏–Ω</a>
      {% endif %}
      <a href="{{ url_for('user_panel') }}" class="{{ 'active' if request.path.startswith('/user') else '' }}">–ü—Ä–æ—Ñ–∏–ª—å</a>
      <a href="{{ url_for('logout') }}">–í—ã–π—Ç–∏</a>
    {% else %}
      <a href="{{ url_for('login') }}" class="{{ 'active' if request.path.startswith('/login') else '' }}">–í—Ö–æ–¥</a>
      <a href="{{ url_for('register') }}" class="{{ 'active' if request.path.startswith('/register') else '' }}">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a>
    {% endif %}
  </nav>

  <div class="container">
    {% for cat, msg in get_flashed_messages(with_categories=true) %}
      <div class="flash {{ cat }}">{{ msg }}</div>
    {% endfor %}
    {% block content %}{% endblock %}
  </div>

  <footer>
    ¬© {{ current_year | default(2025) }} Simple Task System ¬∑ –†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–æ –¥–ª—è –í–ö–†
  </footer>
</body>
</html>
